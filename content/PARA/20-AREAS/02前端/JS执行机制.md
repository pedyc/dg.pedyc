---
title: JSæ‰§è¡Œæœºåˆ¶
date-created: 2025-05-17
date-modified: 2025-05-17
---

## JS æ‰§è¡Œæœºåˆ¶

### ä¸€ã€åŠ è½½é˜¶æ®µ

1. ç½‘ç»œè¯·æ±‚ï¼šå½“æµè§ˆå™¨è§£æ HTML é‡åˆ° `<script>` æ ‡ç­¾æ—¶ï¼Œä¼šæš‚åœ HTML è§£æï¼ˆé™¤éæ ‡è®°ä¸º async/deferï¼‰ï¼Œè¯·æ±‚ JS æ–‡ä»¶
	- async å’Œ defer çš„åŒºåˆ«ï¼š[[JSåŸºç¡€#^a51aaa]]
2. ç¼“å­˜ç­–ç•¥ï¼šæ ¹æ® HTTP å¤´ï¼ˆå¦‚ `Cache-Control`ï¼‰å†³å®šæ˜¯å¦å¤ç”¨æœ¬åœ°ç¼“å­˜

### äºŒã€è§£æä¸ç¼–è¯‘

1. è¯æ³•åˆ†æï¼Œåˆ†è¯

	```javascript
	const x = 10ï¼›
	// åˆ†è§£ä¸º tokens: [â€œconst","x","=","10"]
	```

2. è¯­æ³•åˆ†æï¼Œç”Ÿæˆ AST

	```json
	function foo(){ return 1; }
	//ASTä¼ªç»“æ„
	{
		"type": "FunctionDeclaration",
		"id": { "name": "foo" },
		"body": { "type": "BlockStatement", "body": [...] }
	}
	```

3. é¢„è§£æ

> - **å¿«é€Ÿè·³è¿‡éç«‹å³æ‰§è¡Œçš„ä»£ç **ï¼šå¦‚å‡½æ•°å£°æ˜ï¼Œä»…è¿›è¡Œæµ…å±‚è§£æä»¥æå‡é€Ÿåº¦ã€‚å½“å‡½æ•°è¢«è°ƒç”¨æ—¶å†æ·±åº¦è§£æã€‚

4. ç¼–è¯‘é˜¶æ®µ

> å³æ—¶ç¼–è¯‘ï¼ˆJIT, Just-In-Timeï¼‰ï¼š
> 	- åŸºçº¿ç¼–è¯‘å™¨ï¼ˆBaseline Compilerï¼‰ï¼šå¿«é€Ÿç”Ÿæˆæœªä¼˜åŒ–çš„æœºå™¨ç ï¼ˆå¦‚ V8 çš„ Ignition è§£é‡Šå™¨ç”Ÿæˆå­—èŠ‚ç ï¼‰ã€‚
> 	- ä¼˜åŒ–ç¼–è¯‘å™¨ï¼ˆOptimizing Compilerï¼‰ï¼šå¯¹çƒ­ç‚¹ä»£ç ï¼ˆHot Codeï¼‰è¿›è¡Œä¼˜åŒ–ï¼ˆå¦‚ V8 çš„ TurboFan ç”Ÿæˆé«˜æ•ˆæœºå™¨ç ï¼‰ã€‚
> 	- å»ä¼˜åŒ–ï¼ˆDeoptimizationï¼‰ï¼šå½“å‡è®¾å¤±æ•ˆï¼ˆå¦‚å˜é‡ç±»å‹å˜åŒ–ï¼‰æ—¶å›é€€åˆ°æœªä¼˜åŒ–ä»£ç ã€‚

### ä¸‰ã€æ‰§è¡Œé˜¶æ®µ

1. åˆ›å»º [[æ‰§è¡Œä¸Šä¸‹æ–‡]]ï¼ˆGlobal Execution Contextï¼‰
2. æ‰§è¡Œä»£ç ï¼ˆ[[äº‹ä»¶å¾ªç¯]]ï¼‰
3. [[åƒåœ¾å›æ”¶]]

### å››ã€ç¤ºä¾‹

```javascript
console.log(a); // undefinedï¼ˆvar æå‡ï¼‰
var a = 1;
let b = 2;     // TDZ å¼€å§‹

function foo() {
  console.log(b); // 2ï¼ˆé—­åŒ…è®¿é—®å¤–å±‚ä½œç”¨åŸŸï¼‰
}
foo();

setTimeout(() => console.log('Macrotask'), 0);
Promise.resolve().then(() => console.log('Microtask'));
```

## ğŸ”å‚è€ƒ

- https://chat.deepseek.com/a/chat/s/0a8710ea-3d59-4119-9164-933535529a20
- [[24-æ·±å…¥ç†è§£ JavaScript çš„æ‰§è¡Œæµç¨‹ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ ECã€å˜é‡å¯¹è±¡ VOã€æ´»åŠ¨å¯¹è±¡ AOã€ä½œç”¨åŸŸ Scopeï¼ˆé“¾ï¼‰_js vo ao æœºåˆ¶ - CSDN åšå®¢]]
