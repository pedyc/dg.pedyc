"use strict";(()=>{var b=Object.create;var L=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var B=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var A=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of k(e))!S.call(t,r)&&r!==n&&L(t,r,{get:()=>e[r],enumerable:!(o=H(e,r))||o.enumerable});return t};var D=(t,e,n)=>(n=t!=null?b(P(t)):{},A(e||!t||!t.__esModule?L(n,"default",{value:t,enumerable:!0}):n,t));function M(t,e){if(!t)return;function n(r){r.target===this&&(r.preventDefault(),r.stopPropagation(),e())}function o(r){r.key.startsWith("Esc")&&(r.preventDefault(),e())}t?.addEventListener("click",n),window.addCleanup(()=>t?.removeEventListener("click",n)),document.addEventListener("keydown",o),window.addCleanup(()=>document.removeEventListener("keydown",o))}function w(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var v=class{constructor(e,n){this.container=e;this.content=n;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),n=this.onMouseMove.bind(this),o=this.onMouseUp.bind(this),r=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",n),document.addEventListener("mouseup",o),window.addEventListener("resize",r),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",n),()=>document.removeEventListener("mouseup",o),()=>window.removeEventListener("resize",r))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let n=this.createButton("+",()=>this.zoom(.1)),o=this.createButton("-",()=>this.zoom(-.1)),r=this.createButton("Reset",()=>this.resetTransform());e.appendChild(o),e.appendChild(r),e.appendChild(n),this.container.appendChild(e)}createButton(e,n){let o=document.createElement("button");return o.textContent=e,o.className="mermaid-control-button",o.addEventListener("click",n),window.addCleanup(()=>o.removeEventListener("click",n)),o}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}zoom(e){let n=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),o=this.content.getBoundingClientRect(),r=o.width/2,g=o.height/2,h=n-this.scale;this.currentPan.x-=r*h,this.currentPan.y-=g*h,this.scale=n,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){this.scale=1;let e=this.content.querySelector("svg");this.currentPan={x:e.getBoundingClientRect().width/2,y:e.getBoundingClientRect().height/2},this.updateTransform()}},R=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],C;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;C||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let n=C.default,o=new WeakMap;for(let s of e)o.set(s,s.innerText);async function r(){for(let i of e){i.removeAttribute("data-processed");let a=o.get(i);a&&(i.innerHTML=a)}let s=R.reduce((i,a)=>(i[a]=window.getComputedStyle(document.documentElement).getPropertyValue(a),i),{}),l=document.documentElement.getAttribute("saved-theme")==="dark";n.initialize({startOnLoad:!1,securityLevel:"loose",theme:l?"dark":"base",themeVariables:{fontFamily:s["--codeFont"],primaryColor:s["--light"],primaryTextColor:s["--darkgray"],primaryBorderColor:s["--tertiary"],lineColor:s["--darkgray"],secondaryColor:s["--secondary"],tertiaryColor:s["--tertiary"],clusterBkg:s["--light"],edgeLabelBackground:s["--highlight"]}}),await n.run({nodes:e})}await r(),document.addEventListener("themechange",r),window.addCleanup(()=>document.removeEventListener("themechange",r));for(let s=0;s<e.length;s++){let p=function(){let E=c.querySelector("#mermaid-space"),m=c.querySelector(".mermaid-content");if(!m)return;w(m);let x=l.querySelector("svg").cloneNode(!0);m.appendChild(x),c.classList.add("active"),E.style.cursor="grab",u=new v(E,m)},y=function(){c.classList.remove("active"),u?.cleanup(),u=null};var g=p,h=y;let l=e[s],i=l.parentElement,a=i.querySelector(".clipboard-button"),d=i.querySelector(".expand-button"),f=window.getComputedStyle(a),T=a.offsetWidth+parseFloat(f.marginLeft||"0")+parseFloat(f.marginRight||"0");d.style.right=`calc(${T}px + 0.3rem)`,i.prepend(d);let c=i.querySelector("#mermaid-container");if(!c)return;let u=null;d.addEventListener("click",p),M(c,y),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",p)})}});})();
