"use strict";(()=>{var ve=Object.create;var Ot=Object.defineProperty;var ke=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,Me=Object.prototype.hasOwnProperty;var zt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Te=(t,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Se(e))!Me.call(t,i)&&i!==n&&Ot(t,i,{get:()=>e[i],enumerable:!(u=ke(e,i))||u.enumerable});return t};var Ht=(t,e,n)=>(n=t!=null?ve(Le(t)):{},Te(e||!t||!t.__esModule?Ot(n,"default",{value:t,enumerable:!0}):n,t));var yt=zt(()=>{});var Fe=zt((mn,pe)=>{"use strict";pe.exports=Ve;function it(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function Ve(t){if(t=t||{},t.circles)return Ge(t);let e=new Map;if(e.set(Date,s=>new Date(s)),e.set(Map,(s,l)=>new Map(u(Array.from(s),l))),e.set(Set,(s,l)=>new Set(u(Array.from(s),l))),t.constructorHandlers)for(let s of t.constructorHandlers)e.set(s[0],s[1]);let n=null;return t.proto?r:i;function u(s,l){let o=Object.keys(s),h=new Array(o.length);for(let c=0;c<o.length;c++){let f=o[c],a=s[f];typeof a!="object"||a===null?h[f]=a:a.constructor!==Object&&(n=e.get(a.constructor))?h[f]=n(a,l):ArrayBuffer.isView(a)?h[f]=it(a):h[f]=l(a)}return h}function i(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))return u(s,i);if(s.constructor!==Object&&(n=e.get(s.constructor)))return n(s,i);let l={};for(let o in s){if(Object.hasOwnProperty.call(s,o)===!1)continue;let h=s[o];typeof h!="object"||h===null?l[o]=h:h.constructor!==Object&&(n=e.get(h.constructor))?l[o]=n(h,i):ArrayBuffer.isView(h)?l[o]=it(h):l[o]=i(h)}return l}function r(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))return u(s,r);if(s.constructor!==Object&&(n=e.get(s.constructor)))return n(s,r);let l={};for(let o in s){let h=s[o];typeof h!="object"||h===null?l[o]=h:h.constructor!==Object&&(n=e.get(h.constructor))?l[o]=n(h,r):ArrayBuffer.isView(h)?l[o]=it(h):l[o]=r(h)}return l}}function Ge(t){let e=[],n=[],u=new Map;if(u.set(Date,o=>new Date(o)),u.set(Map,(o,h)=>new Map(r(Array.from(o),h))),u.set(Set,(o,h)=>new Set(r(Array.from(o),h))),t.constructorHandlers)for(let o of t.constructorHandlers)u.set(o[0],o[1]);let i=null;return t.proto?l:s;function r(o,h){let c=Object.keys(o),f=new Array(c.length);for(let a=0;a<c.length;a++){let g=c[a],D=o[g];if(typeof D!="object"||D===null)f[g]=D;else if(D.constructor!==Object&&(i=u.get(D.constructor)))f[g]=i(D,h);else if(ArrayBuffer.isView(D))f[g]=it(D);else{let p=e.indexOf(D);p!==-1?f[g]=n[p]:f[g]=h(D)}}return f}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return r(o,s);if(o.constructor!==Object&&(i=u.get(o.constructor)))return i(o,s);let h={};e.push(o),n.push(h);for(let c in o){if(Object.hasOwnProperty.call(o,c)===!1)continue;let f=o[c];if(typeof f!="object"||f===null)h[c]=f;else if(f.constructor!==Object&&(i=u.get(f.constructor)))h[c]=i(f,s);else if(ArrayBuffer.isView(f))h[c]=it(f);else{let a=e.indexOf(f);a!==-1?h[c]=n[a]:h[c]=s(f)}}return e.pop(),n.pop(),h}function l(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return r(o,l);if(o.constructor!==Object&&(i=u.get(o.constructor)))return i(o,l);let h={};e.push(o),n.push(h);for(let c in o){let f=o[c];if(typeof f!="object"||f===null)h[c]=f;else if(f.constructor!==Object&&(i=u.get(f.constructor)))h[c]=i(f,l);else if(ArrayBuffer.isView(f))h[c]=it(f);else{let a=e.indexOf(f);a!==-1?h[c]=n[a]:h[c]=l(f)}}return e.pop(),n.pop(),h}}});var qt={},m;function M(t,e,n){let u=typeof n,i=typeof t;if(u!=="undefined"){if(i!=="undefined"){if(n){if(i==="function"&&u===i)return function(l){return t(n(l))};if(e=t.constructor,e===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var r=new Map(n);for(var s of t)r.set(s[0],s[1]);return r}if(e===Set){s=new Set(n);for(r of t.values())s.add(r);return s}}}return t}return n}return i==="undefined"?e:t}function S(){return Object.create(null)}function z(t){return typeof t=="string"}function ot(t){return typeof t=="object"}function je(t){let e=[];for(let n of t.keys())e.push(n);return e}function lt(t,e){if(z(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}function Re(t){let e=0;for(let n=0,u;n<t.length;n++)(u=t[n])&&e<u.length&&(e=u.length);return e}var be=/[^\p{L}\p{N}]+/u,Oe=/(\d{3})/g,ze=/(\D)(\d{3})/g,He=/(\d{3})(\D)/g,It=/[\u0300-\u036f]/g;function et(t={}){if(!this||this.constructor!==et)return new et(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}m=et.prototype;m.assign=function(t){this.normalize=M(t.normalize,!0,this.normalize);let e=t.include,n=e||t.exclude||t.split,u;if(n||n===""){if(typeof n=="object"&&n.constructor!==RegExp){let i="";u=!e,e||(i+="\\p{Z}"),n.letter&&(i+="\\p{L}"),n.number&&(i+="\\p{N}",u=!!e),n.symbol&&(i+="\\p{S}"),n.punctuation&&(i+="\\p{P}"),n.control&&(i+="\\p{C}"),(n=n.char)&&(i+=typeof n=="object"?n.join(""):n);try{this.split=new RegExp("["+(e?"^":"")+i+"]+","u")}catch{this.split=/\s+/}}else this.split=n,u=n===!1||2>"a1a".split(n).length;this.numeric=M(t.numeric,u)}else{try{this.split=M(this.split,be)}catch{this.split=/\s+/}this.numeric=M(t.numeric,M(this.numeric,!0))}if(this.prepare=M(t.prepare,null,this.prepare),this.finalize=M(t.finalize,null,this.finalize),n=t.filter,this.filter=typeof n=="function"?n:M(n&&new Set(n),null,this.filter),this.dedupe=M(t.dedupe,!0,this.dedupe),this.matcher=M((n=t.matcher)&&new Map(n),null,this.matcher),this.mapper=M((n=t.mapper)&&new Map(n),null,this.mapper),this.stemmer=M((n=t.stemmer)&&new Map(n),null,this.stemmer),this.replacer=M(t.replacer,null,this.replacer),this.minlength=M(t.minlength,1,this.minlength),this.maxlength=M(t.maxlength,1024,this.maxlength),this.rtl=M(t.rtl,!1,this.rtl),(this.cache=n=M(t.cache,!0,this.cache))&&(this.H=null,this.S=typeof n=="number"?n:2e5,this.B=new Map,this.G=new Map,this.L=this.K=128),this.h="",this.M=null,this.A="",this.N=null,this.matcher)for(let i of this.matcher.keys())this.h+=(this.h?"|":"")+i;if(this.stemmer)for(let i of this.stemmer.keys())this.A+=(this.A?"|":"")+i;return this};m.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.N=null,this.cache&&Z(this),this};m.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&Z(this),this};m.addMapper=function(t,e){return typeof t=="object"?this.addReplacer(t,e):1<t.length?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&Z(this),this)};m.addMatcher=function(t,e){return typeof t=="object"?this.addReplacer(t,e):2>t.length&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.M=null,this.cache&&Z(this),this)};m.addReplacer=function(t,e){return typeof t=="string"?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&Z(this),this)};m.encode=function(t,e){if(this.cache&&t.length<=this.K)if(this.H){if(this.B.has(t))return this.B.get(t)}else this.H=setTimeout(Z,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=It?t.normalize("NFKD").replace(It,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&3<t.length&&(t=t.replace(ze,"$1 $2").replace(He,"$1 $2").replace(Oe,"$1 "));let n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),u=[],i=S(),r,s,l=this.split||this.split===""?t.split(this.split):[t];for(let h=0,c,f;h<l.length;h++)if((c=f=l[h])&&!(c.length<this.minlength||c.length>this.maxlength)){if(e){if(i[c])continue;i[c]=1}else{if(r===c)continue;r=c}if(n)u.push(c);else if(!this.filter||(typeof this.filter=="function"?this.filter(c):!this.filter.has(c))){if(this.cache&&c.length<=this.L)if(this.H){var o=this.G.get(c);if(o||o===""){o&&u.push(o);continue}}else this.H=setTimeout(Z,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+this.A+")$"));let a;for(;a!==c&&2<c.length;)a=c,c=c.replace(this.N,g=>this.stemmer.get(g))}if(c&&(this.mapper||this.dedupe&&1<c.length)){o="";for(let a=0,g="",D,p;a<c.length;a++)D=c.charAt(a),D===g&&this.dedupe||((p=this.mapper&&this.mapper.get(D))||p===""?p===g&&this.dedupe||!(g=p)||(o+=p):o+=g=D);c=o}if(this.matcher&&1<c.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),c=c.replace(this.M,a=>this.matcher.get(a))),c&&this.replacer)for(o=0;c&&o<this.replacer.length;o+=2)c=c.replace(this.replacer[o],this.replacer[o+1]);if(this.cache&&f.length<=this.L&&(this.G.set(f,c),this.G.size>this.S&&(this.G.clear(),this.L=this.L/1.1|0)),c){if(c!==f)if(e){if(i[c])continue;i[c]=1}else{if(s===c)continue;s=c}u.push(c)}}}return this.finalize&&(u=this.finalize(u)||u),this.cache&&t.length<=this.K&&(this.B.set(t,u),this.B.size>this.S&&(this.B.clear(),this.K=this.K/1.1|0)),u};function Z(t){t.H=null,t.B.clear(),t.G.clear()}var Y,ut;async function Ie(t){t=t.data;var e=t.task;let n=t.id,u=t.args;switch(e){case"init":ut=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Y=new self.FlexSearch.Index(ut),delete self.FlexSearch):Y=new I(ut),postMessage({id:n});break;default:let i;e==="export"&&(u[1]?(u[0]=ut.export,u[2]=0,u[3]=1):u=null),e==="import"?u[0]&&(t=await ut.import.call(Y,u[0]),Y.import(u[0],t)):(i=u&&Y[e].apply(Y,u))&&i.then&&(i=await i),postMessage(e==="search"?{id:n,msg:i}:{id:n})}}function Mt(t){rt.call(t,"add"),rt.call(t,"append"),rt.call(t,"search"),rt.call(t,"update"),rt.call(t,"remove")}var vt,Pt,gt;function Pe(){vt=gt=0}function rt(t){this[t+"Async"]=function(){let e=arguments;var n=e[e.length-1];let u;if(typeof n=="function"&&(u=n,delete e[e.length-1]),vt?gt||(gt=Date.now()-Pt>=this.priority*this.priority*3):(vt=setTimeout(Pe,0),Pt=Date.now()),gt){let r=this;return new Promise(s=>{setTimeout(function(){s(r[t+"Async"].apply(r,e))},0)})}let i=this[t].apply(this,e);return n=i.then?i:new Promise(r=>r(i)),u&&n.then(u),n}}var tt=0;function nt(t={}){function e(s){function l(o){o=o.data||o;let h=o.id,c=h&&i.h[h];c&&(c(o.msg),delete i.h[h])}if(this.worker=s,this.h=S(),this.worker)return u?this.worker.on("message",l):this.worker.onmessage=l,t.config?new Promise(function(o){i.h[++tt]=function(){o(i),1e9<tt&&(tt=0)},i.worker.postMessage({id:tt,task:"init",factory:n,options:t})}):(this.worker.postMessage({task:"init",factory:n,options:t}),this.priority=t.priority||4,this)}if(!this||this.constructor!==nt)return new nt(t);let n=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;n&&(n=n.toString());let u=typeof window>"u",i=this,r=_e(n,u,t.worker);return r.then?r.then(function(s){return e.call(i,s)}):e.call(this,r)}$("add");$("append");$("search");$("update");$("remove");$("clear");$("export");$("import");Mt(nt.prototype);function $(t){nt.prototype[t]=function(){let e=this,n=[].slice.call(arguments);var u=n[n.length-1];let i;return typeof u=="function"&&(i=u,n.pop()),u=new Promise(function(r){t==="export"&&typeof n[0]=="function"&&(n[0]=null),e.h[++tt]=r,e.worker.postMessage({task:t,id:tt,args:n})}),i?(u.then(i),this):u}}function _e(t,e,n){return e?typeof module<"u"?new(yt()).Worker(__dirname+"/worker/node.js"):Promise.resolve().then(()=>Ht(yt())).then(function(u){return new u.Worker(qt.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Ie.toString()],{type:"text/javascript"}))):new window.Worker(typeof n=="string"?n:qt.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}function Tt(t,e=0){let n=[],u=[];e&&(e=25e4/e*5e3|0);for(let i of t.entries())u.push(i),u.length===e&&(n.push(u),u=[]);return u.length&&n.push(u),n}function jt(t,e){e||(e=new Map);for(let n=0,u;n<t.length;n++)u=t[n],e.set(u[0],u[1]);return e}function Qt(t,e=0){let n=[],u=[];e&&(e=25e4/e*1e3|0);for(let i of t.entries())u.push([i[0],Tt(i[1])[0]]),u.length===e&&(n.push(u),u=[]);return u.length&&n.push(u),n}function Xt(t,e){e||(e=new Map);for(let n=0,u,i;n<t.length;n++)u=t[n],i=e.get(u[0]),e.set(u[0],jt(u[1],i));return e}function Yt(t){let e=[],n=[];for(let u of t.keys())n.push(u),n.length===25e4&&(e.push(n),n=[]);return n.length&&e.push(n),e}function te(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function pt(t,e,n,u,i,r,s=0){let l=u&&u.constructor===Array;var o=l?u.shift():u;if(!o)return this.export(t,e,i,r+1);if((o=t((e?e+".":"")+(s+1)+"."+n,JSON.stringify(o)))&&o.then){let h=this;return o.then(function(){return pt.call(h,t,e,n,l?u:null,i,r,s+1)})}return pt.call(this,t,e,n,l?u:null,i,r,s+1)}function _t(t,e){let n="";for(let u of t.entries()){t=u[0];let i=u[1],r="";for(let s=0,l;s<i.length;s++){l=i[s]||[""];let o="";for(let h=0;h<l.length;h++)o+=(o?",":"")+(e==="string"?'"'+l[h]+'"':l[h]);o="["+o+"]",r+=(r?",":"")+o}r='["'+t+'",['+r+"]]",n+=(n?",":"")+r}return n}function Nt(t,e,n,u){let i=[];for(let r=0,s;r<t.index.length;r++)if(s=t.index[r],e>=s.length)e-=s.length;else{e=s[u?"splice":"slice"](e,n);let l=e.length;if(l&&(i=i.length?i.concat(e):e,n-=l,u&&(t.length-=l),!n))break;e=0}return i}function q(t){if(!this||this.constructor!==q)return new q(t);this.index=t?[t]:[],this.length=t?t.length:0;let e=this;return new Proxy([],{get(n,u){if(u==="length")return e.length;if(u==="push")return function(i){e.index[e.index.length-1].push(i),e.length++};if(u==="pop")return function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()};if(u==="indexOf")return function(i){let r=0;for(let s=0,l,o;s<e.index.length;s++){if(l=e.index[s],o=l.indexOf(i),0<=o)return r+o;r+=l.length}return-1};if(u==="includes")return function(i){for(let r=0;r<e.index.length;r++)if(e.index[r].includes(i))return!0;return!1};if(u==="slice")return function(i,r){return Nt(e,i||0,r||e.length,!1)};if(u==="splice")return function(i,r){return Nt(e,i||0,r||e.length,!0)};if(u==="constructor")return Array;if(typeof u!="symbol")return(n=e.index[u/2**31|0])&&n[u]},set(n,u,i){return n=u/2**31|0,(e.index[n]||(e.index[n]=[]))[u]=i,e.length++,!0}})}q.prototype.clear=function(){this.index.length=0};q.prototype.destroy=function(){this.proxy=this.index=null};q.prototype.push=function(){};function _(t=8){if(!this||this.constructor!==_)return new _(t);this.index=S(),this.h=[],this.size=0,32<t?(this.B=ne,this.A=BigInt(t)):(this.B=ee,this.A=t)}_.prototype.get=function(t){let e=this.index[this.B(t)];return e&&e.get(t)};_.prototype.set=function(t,e){var n=this.B(t);let u=this.index[n];u?(n=u.size,u.set(t,e),(n-=u.size)&&this.size++):(this.index[n]=u=new Map([[t,e]]),this.h.push(u),this.size++)};function H(t=8){if(!this||this.constructor!==H)return new H(t);this.index=S(),this.h=[],this.size=0,32<t?(this.B=ne,this.A=BigInt(t)):(this.B=ee,this.A=t)}H.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)};m=_.prototype;m.has=H.prototype.has=function(t){let e=this.index[this.B(t)];return e&&e.has(t)};m.delete=H.prototype.delete=function(t){let e=this.index[this.B(t)];e&&e.delete(t)&&this.size--};m.clear=H.prototype.clear=function(){this.index=S(),this.h=[],this.size=0};m.values=H.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e};m.keys=H.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e};m.entries=H.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};function ee(t){let e=2**this.A-1;if(typeof t=="number")return t&e;let n=0,u=this.A+1;for(let i=0;i<t.length;i++)n=(n*u^t.charCodeAt(i))&e;return this.A===32?n+2**31:n}function ne(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if(n==="bigint")return t&e;if(n==="number")return BigInt(t)&e;n=BigInt(0);let u=this.A+BigInt(1);for(let i=0;i<t.length;i++)n=(n*u^BigInt(t.charCodeAt(i)))&e;return n}Q.prototype.add=function(t,e,n){if(ot(t)&&(e=t,t=lt(e,this.key)),e&&(t||t===0)){if(!n&&this.reg.has(t))return this.update(t,e);for(let l=0,o;l<this.field.length;l++){o=this.F[l];var u=this.index.get(this.field[l]);if(typeof o=="function"){var i=o(e);i&&u.add(t,i,!1,!0)}else i=o.I,(!i||i(e))&&(o.constructor===String?o=[""+o]:z(o)&&(o=[o]),St(e,o,this.J,0,u,t,o[0],n))}if(this.tag)for(u=0;u<this.D.length;u++){var r=this.D[u];i=this.tag.get(this.R[u]);let l=S();if(typeof r=="function"){if(r=r(e),!r)continue}else{var s=r.I;if(s&&!s(e))continue;r.constructor===String&&(r=""+r),r=lt(e,r)}if(i&&r){z(r)&&(r=[r]);for(let o=0,h,c;o<r.length;o++)if(h=r[o],!l[h]&&(l[h]=1,(s=i.get(h))?c=s:i.set(h,c=[]),!n||!c.includes(t))){if(c.length===2**31-1){if(s=new q(c),this.fastupdate)for(let f of this.reg.values())f.includes(c)&&(f[f.indexOf(c)]=s);i.set(h,c=s)}c.push(t),this.fastupdate&&((s=this.reg.get(t))?s.push(c):this.reg.set(t,[c]))}}}if(this.store&&(!n||!this.store.has(t))){let l;if(this.C){l=S();for(let o=0,h;o<this.C.length;o++){if(h=this.C[o],(n=h.I)&&!n(e))continue;let c;if(typeof h=="function"){if(c=h(e),!c)continue;h=[h.V]}else if(z(h)||h.constructor===String){l[h]=e[h];continue}kt(e,l,h,0,h[0],c)}}this.store.set(t,l||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function kt(t,e,n,u,i,r){if(t=t[i],u===n.length-1)e[i]=r||t;else if(t)if(t.constructor===Array)for(e=e[i]=Array(t.length),i=0;i<t.length;i++)kt(t,e,n,u,i);else e=e[i]||(e[i]=S()),i=n[++u],kt(t,e,n,u,i)}function St(t,e,n,u,i,r,s,l){if(t=t[s])if(u===e.length-1){if(t.constructor===Array){if(n[u]){for(e=0;e<t.length;e++)i.add(r,t[e],!0,!0);return}t=t.join(" ")}i.add(r,t,l,!0)}else if(t.constructor===Array)for(s=0;s<t.length;s++)St(t,e,n,u,i,r,s,l);else s=e[++u],St(t,e,n,u,i,r,s,l);else i.db&&i.remove(r)}function ie(t,e,n,u,i,r,s){let l=t.length,o=[],h,c;h=S();for(let f=0,a,g,D,p;f<e;f++)for(let F=0;F<l;F++)if(D=t[F],f<D.length&&(a=D[f]))for(let E=0;E<a.length;E++){if(g=a[E],(c=h[g])?h[g]++:(c=0,h[g]=1),p=o[c]||(o[c]=[]),!s){let C=f+(F||!i?0:r||0);p=p[C]||(p[C]=[])}if(p.push(g),s&&n&&c===l-1&&p.length-u===n)return u?p.slice(u):p}if(t=o.length)if(i)o=1<o.length?ue(o,n,u,s,r):(o=o[0]).length>n||u?o.slice(u,n+u):o;else{if(t<l)return[];if(o=o[t-1],n||u)if(s)(o.length>n||u)&&(o=o.slice(u,n+u));else{i=[];for(let f=0,a;f<o.length;f++)if(a=o[f],a.length>u)u-=a.length;else if((a.length>n||u)&&(a=a.slice(u,n+u),n-=a.length,u&&(u-=a.length)),i.push(a),!n)break;o=1<i.length?[].concat.apply([],i):i[0]}}return o}function ue(t,e,n,u,i){let r=[],s=S(),l;var o=t.length;let h;if(u){for(i=o-1;0<=i;i--)if(h=(u=t[i])&&u.length){for(o=0;o<h;o++)if(l=u[o],!s[l]){if(s[l]=1,n)n--;else if(r.push(l),r.length===e)return r}}}else for(let c=o-1,f,a=0;0<=c;c--){f=t[c];for(let g=0;g<f.length;g++)if(h=(u=f[g])&&u.length){for(let D=0;D<h;D++)if(l=u[D],!s[l])if(s[l]=1,n)n--;else{let p=(g+(c<o-1&&i||0))/(c+1)|0;if((r[p]||(r[p]=[])).push(l),++a===e)return r}}}return r}function Ne(t,e,n){let u=S(),i=[];for(let r=0,s;r<e.length;r++){s=e[r];for(let l=0;l<s.length;l++)u[s[l]]=1}if(n)for(let r=0,s;r<t.length;r++)s=t[r],u[s]&&(i.push(s),u[s]=0);else for(let r=0,s,l;r<t.result.length;r++)for(s=t.result[r],e=0;e<s.length;e++)l=s[e],u[l]&&((i[r]||(i[r]=[])).push(l),u[l]=0);return i}function Rt(t,e,n,u){if(!t.length)return t;if(t.length===1)return t=t[0],t=n||t.length>e?e?t.slice(n,n+e):t.slice(n):t,u?U.call(this,t):t;let i=[];for(let r=0,s,l;r<t.length;r++)if((s=t[r])&&(l=s.length)){if(n){if(n>=l){n-=l;continue}n<l&&(s=e?s.slice(n,n+e):s.slice(n),l=s.length,n=0)}if(l>e&&(s=s.slice(0,e),l=e),!i.length&&l>=e)return u?U.call(this,s):s;if(i.push(s),e-=l,!e)break}return i=1<i.length?[].concat.apply([],i):i[0],u?U.call(this,i):i}function Et(t,e,n){var u=n[0];if(u.then)return Promise.all(n).then(function(c){return t[e].apply(t,c)});if(u[0]&&u[0].index)return t[e].apply(t,u);u=[];let i=[],r=0,s=0,l,o,h;for(let c=0,f;c<n.length;c++)if(f=n[c]){let a;if(f.constructor===w)a=f.result;else if(f.constructor===Array)a=f;else if(r=f.limit||0,s=f.offset||0,h=f.suggest,o=f.resolve,l=f.enrich&&o,f.index)f.resolve=!1,a=f.index.search(f).result,f.resolve=o;else if(f.and)a=t.and(f.and);else if(f.or)a=t.or(f.or);else if(f.xor)a=t.xor(f.xor);else if(f.not)a=t.not(f.not);else continue;if(a.then)i.push(a);else if(a.length)u[c]=a;else if(!h&&(e==="and"||e==="xor")){u=[];break}}return{O:u,P:i,limit:r,offset:s,enrich:l,resolve:o,suggest:h}}w.prototype.or=function(){let{O:t,P:e,limit:n,offset:u,enrich:i,resolve:r}=Et(this,"or",arguments);return re.call(this,t,e,n,u,i,r)};function re(t,e,n,u,i,r){if(e.length){let s=this;return Promise.all(e).then(function(l){t=[];for(let o=0,h;o<l.length;o++)(h=l[o]).length&&(t[o]=h);return re.call(s,t,[],n,u,i,r)})}return t.length&&(this.result.length&&t.push(this.result),2>t.length?this.result=t[0]:(this.result=ue(t,n,u,!1,this.h),u=0)),r?this.resolve(n,u,i):this}w.prototype.and=function(){let t=this.result.length,e,n,u,i;if(!t){let r=arguments[0];r&&(t=!!r.suggest,i=r.resolve,e=r.limit,n=r.offset,u=r.enrich&&i)}if(t){let{O:r,P:s,limit:l,offset:o,enrich:h,resolve:c,suggest:f}=Et(this,"and",arguments);return se.call(this,r,s,l,o,h,c,f)}return i?this.resolve(e,n,u):this};function se(t,e,n,u,i,r,s){if(e.length){let l=this;return Promise.all(e).then(function(o){t=[];for(let h=0,c;h<o.length;h++)(c=o[h]).length&&(t[h]=c);return se.call(l,t,[],n,u,i,r,s)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else{if(e=Re(t))return this.result=ie(t,e,n,u,s,this.h,r),r?i?U.call(this.index,this.result):this.result:this;this.result=[]}else s||(this.result=t);return r?this.resolve(n,u,i):this}w.prototype.xor=function(){let{O:t,P:e,limit:n,offset:u,enrich:i,resolve:r,suggest:s}=Et(this,"xor",arguments);return oe.call(this,t,e,n,u,i,r,s)};function oe(t,e,n,u,i,r,s){if(e.length){let l=this;return Promise.all(e).then(function(o){t=[];for(let h=0,c;h<o.length;h++)(c=o[h]).length&&(t[h]=c);return oe.call(l,t,[],n,u,i,r,s)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else return this.result=Ue.call(this,t,n,u,r,this.h),r?i?U.call(this.index,this.result):this.result:this;else s||(this.result=t);return r?this.resolve(n,u,i):this}function Ue(t,e,n,u,i){let r=[],s=S(),l=0;for(let o=0,h;o<t.length;o++)if(h=t[o]){l<h.length&&(l=h.length);for(let c=0,f;c<h.length;c++)if(f=h[c])for(let a=0,g;a<f.length;a++)g=f[a],s[g]=s[g]?2:1}for(let o=0,h,c=0;o<l;o++)for(let f=0,a;f<t.length;f++)if((a=t[f])&&(h=a[o])){for(let g=0,D;g<h.length;g++)if(D=h[g],s[D]===1)if(n)n--;else if(u){if(r.push(D),r.length===e)return r}else{let p=o+(f?i:0);if(r[p]||(r[p]=[]),r[p].push(D),++c===e)return r}}return r}w.prototype.not=function(){let{O:t,P:e,limit:n,offset:u,enrich:i,resolve:r,suggest:s}=Et(this,"not",arguments);return le.call(this,t,e,n,u,i,r,s)};function le(t,e,n,u,i,r,s){if(e.length){let l=this;return Promise.all(e).then(function(o){t=[];for(let h=0,c;h<o.length;h++)(c=o[h]).length&&(t[h]=c);return le.call(l,t,[],n,u,i,r,s)})}if(t.length&&this.result.length)this.result=$e.call(this,t,n,u,r);else if(r)return this.resolve(n,u,i);return r?i?U.call(this.index,this.result):this.result:this}function $e(t,e,n,u){let i=[];t=new Set(t.flat().flat());for(let r=0,s,l=0;r<this.result.length;r++)if(s=this.result[r]){for(let o=0,h;o<s.length;o++)if(h=s[o],!t.has(h)){if(n)n--;else if(u){if(i.push(h),i.length===e)return i}else if(i[r]||(i[r]=[]),i[r].push(h),++l===e)return i}}return i}function w(t){if(!this||this.constructor!==w)return new w(t);if(t&&t.index)return t.resolve=!1,this.index=t.index,this.h=t.boost||0,this.result=t.index.search(t).result,this;this.index=null,this.result=t||[],this.h=0}w.prototype.limit=function(t){if(this.result.length){let e=[];for(let n=0,u;n<this.result.length;n++)if(u=this.result[n])if(u.length<=t){if(e[n]=u,t-=u.length,!t)break}else{e[n]=u.slice(0,t);break}this.result=e}return this};w.prototype.offset=function(t){if(this.result.length){let e=[];for(let n=0,u;n<this.result.length;n++)(u=this.result[n])&&(u.length<=t?t-=u.length:(e[n]=u.slice(t),t=0));this.result=e}return this};w.prototype.boost=function(t){return this.h+=t,this};w.prototype.resolve=function(t,e,n){let u=this.result,i=this.index;return this.result=this.index=null,u.length?(typeof t=="object"&&(n=t.enrich,e=t.offset,t=t.limit),Rt.call(i,u,t||100,e,n)):u};S();Q.prototype.search=function(t,e,n,u){n||(!e&&ot(t)?(n=t,t=""):ot(e)&&(n=e,e=0));let i=[];var r=[];let s;var l;let o,h,c,f=0;var a=!0;let g;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,s=n.pluck,o=n.merge,h=s||n.field||(h=n.index)&&(h.index?null:h),c=this.tag&&n.tag;var D=n.suggest;a=n.resolve!==!1,a||s||!(h=h||this.field)||(z(h)?s=h:(h.constructor===Array&&h.length===1&&(h=h[0]),s=h.field||h.index)),g=(l=this.store&&n.enrich&&a)&&n.highlight,e=n.limit||e;var p=n.offset||0;if(e||(e=100),c&&(!this.db||!u)){c.constructor!==Array&&(c=[c]);var F=[];for(let x=0,y;x<c.length;x++)if(y=c[x],y.field&&y.tag){var E=y.tag;if(E.constructor===Array)for(var C=0;C<E.length;C++)F.push(y.field,E[C]);else F.push(y.field,E)}else{E=Object.keys(y);for(let v=0,b,L;v<E.length;v++)if(b=E[v],L=y[b],L.constructor===Array)for(C=0;C<L.length;C++)F.push(b,L[C]);else F.push(b,L)}if(c=F,!t){if(a=[],F.length)for(r=0;r<F.length;r+=2){if(this.db){if(D=this.index.get(F[r]),!D)continue;a.push(D=D.db.tag(F[r+1],e,p,l))}else D=We.call(this,F[r],F[r+1],e,p,l);i.push({field:F[r],tag:F[r+1],result:D})}return a.length?Promise.all(a).then(function(x){for(let y=0;y<x.length;y++)i[y].result=x[y];return i}):i}}h&&h.constructor!==Array&&(h=[h])}h||(h=this.field),F=!u&&(this.worker||this.db)&&[];let T;for(let x=0,y,v,b;x<h.length;x++){if(v=h[x],this.db&&this.tag&&!this.F[x])continue;let L;if(z(v)||(L=v,v=L.field,t=L.query||t,e=L.limit||e,p=L.offset||p,D=L.suggest||D,l=this.store&&(L.enrich||l)),u)y=u[x];else if(E=L||n,C=this.index.get(v),c&&(this.db&&(E.tag=c,T=C.db.support_tag_search,E.field=h),T||(E.enrich=!1)),F){F[x]=C.search(t,e,E),E&&l&&(E.enrich=l);continue}else y=C.search(t,e,E),E&&l&&(E.enrich=l);if(b=y&&(a?y.length:y.result.length),c&&b){if(E=[],C=0,this.db&&u){if(!T)for(let O=h.length;O<u.length;O++){let d=u[O];if(d&&d.length)C++,E.push(d);else if(!D)return a?i:new w(i)}}else for(let O=0,d,A;O<c.length;O+=2){if(d=this.tag.get(c[O]),!d){if(D)continue;return a?i:new w(i)}if(A=(d=d&&d.get(c[O+1]))&&d.length)C++,E.push(d);else if(!D)return a?i:new w(i)}if(C){if(y=Ne(y,E,a),b=y.length,!b&&!D)return a?y:new w(y);C--}}if(b)r[f]=v,i.push(y),f++;else if(h.length===1)return a?i:new w(i)}if(F){if(this.db&&c&&c.length&&!T)for(l=0;l<c.length;l+=2){if(r=this.index.get(c[l]),!r){if(D)continue;return a?i:new w(i)}F.push(r.db.tag(c[l+1],e,p,!1))}let x=this;return Promise.all(F).then(function(y){return y.length?x.search(t,e,n,y):y})}if(!f)return a?i:new w(i);if(s&&(!l||!this.store))return i[0];for(F=[],p=0;p<r.length;p++){if(D=i[p],l&&D.length&&typeof D[0].doc>"u"&&(this.db?F.push(D=this.index.get(this.field[0]).db.enrich(D)):D=U.call(this,D)),s)return a?g?Bt(t,D,this.index,s,g):D:new w(D);i[p]={field:r[p],result:D}}if(l&&this.db&&F.length){let x=this;return Promise.all(F).then(function(y){for(let v=0;v<y.length;v++)i[v].result=y[v];return o?Ut(i):g?Bt(t,i,x.index,s,g):i})}return o?Ut(i):g?Bt(t,i,this.index,s,g):i};function Bt(t,e,n,u,i){let r,s;for(let o=0,h,c,f;o<e.length;o++){let a;if(u)a=e,f=u;else{var l=e[o];if(f=l.field,!f)continue;a=l.result}c=n.get(f),h=c.encoder,l=c.tokenize,h!==r&&(r=h,s=r.encode(t));for(let g=0;g<a.length;g++){let D="",p=lt(a[g].doc,f).split(/\s+/);for(let F=0,E,C;F<p.length;F++){E=p[F],C=h.encode(E),C=1<C.length?C.join(" "):C[0];let T;if(C&&E)for(let x=0,y;x<s.length;x++)if(y=s[x],l==="strict"){if(C===y){D+=(D?" ":"")+i.replace("$1",E),T=!0;break}}else{let v=C.indexOf(y);if(-1<v){D+=(D?" ":"")+E.substring(0,v)+i.replace("$1",E.substring(v,v+y.length))+E.substring(v+y.length),T=!0;break}}T||(D+=(D?" ":"")+p[F])}a[g].highlight=D}if(u)break}return e}function Ut(t){let e=[],n=S();for(let u=0,i,r;u<t.length;u++){i=t[u],r=i.result;for(let s=0,l,o,h;s<r.length;s++)o=r[s],typeof o!="object"&&(o={id:o}),l=o.id,(h=n[l])?h.push(i.field):(o.field=n[l]=[i.field],e.push(o))}return e}function We(t,e,n,u,i){if(t=this.tag.get(t),!t)return[];if((e=(t=t&&t.get(e))&&t.length-u)&&0<e)return(e>n||u)&&(t=t.slice(u,u+n)),i&&(t=U.call(this,t)),t}function U(t){if(!this||!this.store)return t;let e=Array(t.length);for(let n=0,u;n<t.length;n++)u=t[n],e[n]={id:u,doc:this.store.get(u)};return e}function Q(t){if(!this||this.constructor!==Q)return new Q(t);let e=t.document||t.doc||t,n,u;if(this.F=[],this.field=[],this.J=[],this.key=(n=e.key||e.id)&&Ft(n,this.J)||"id",(u=t.keystore||0)&&(this.keystore=u),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?u?new H(u):new Set:u?new _(u):new Map,this.C=(n=e.store||null)&&n&&n!==!0&&[],this.store=n&&(u?new _(u):new Map),this.cache=(n=t.cache||null)&&new X(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=Ke.call(this,t,e),this.tag=null,(n=e.tag)&&(typeof n=="string"&&(n=[n]),n.length)){this.tag=new Map,this.D=[],this.R=[];for(let i=0,r,s;i<n.length;i++){if(r=n[i],s=r.field||r,!s)throw Error("The tag field from the document descriptor is undefined.");r.custom?this.D[i]=r.custom:(this.D[i]=Ft(s,this.J),r.filter&&(typeof this.D[i]=="string"&&(this.D[i]=new String(this.D[i])),this.D[i].I=r.filter)),this.R[i]=s,this.tag.set(s,new Map)}}if(this.worker){this.fastupdate=!1;let i=[];for(let r of this.index.values())r.then&&i.push(r);if(i.length){let r=this;return Promise.all(i).then(function(s){let l=new Map,o=0;for(let c of r.index.entries()){let f=c[0];var h=c[1];if(h.then){h=i[o].encoder||{};let a=l.get(h);a||(a=h.encode?h:new et(h),l.set(h,a)),h=s[o],h.encoder=a,r.index.set(f,h),o++}}return r})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}m=Q.prototype;m.mount=function(t){let e=this.field;if(this.tag)for(let r=0,s;r<this.R.length;r++){s=this.R[r];var n=void 0;this.index.set(s,n=new I({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(s),n.tag=this.tag.get(s)}n=[];let u={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let r=0,s,l;r<e.length;r++){u.field=l=e[r],s=this.index.get(l);let o=new t.constructor(t.id,u);o.id=t.id,n[r]=o.mount(s),s.document=!0,r?s.bypass=!0:s.store=this.store}let i=this;return this.db=Promise.all(n).then(function(){i.db=!0})};m.commit=async function(t,e){let n=[];for(let u of this.index.values())n.push(u.commit(t,e));await Promise.all(n),this.reg.clear()};m.destroy=function(){let t=[];for(let e of this.index.values())t.push(e.destroy());return Promise.all(t)};function Ke(t,e){let n=new Map,u=e.index||e.field||e;z(u)&&(u=[u]);for(let i=0,r,s;i<u.length;i++){if(r=u[i],z(r)||(s=r,r=r.field),s=ot(s)?Object.assign({},t,s):t,this.worker){let l=new nt(s);l.encoder=s.encoder,n.set(r,l)}this.worker||n.set(r,new I(s,this.reg)),s.custom?this.F[i]=s.custom:(this.F[i]=Ft(r,this.J),s.filter&&(typeof this.F[i]=="string"&&(this.F[i]=new String(this.F[i])),this.F[i].I=s.filter)),this.field[i]=r}if(this.C){t=e.store,z(t)&&(t=[t]);for(let i=0,r,s;i<t.length;i++)r=t[i],s=r.field||r,r.custom?(this.C[i]=r.custom,r.custom.V=s):(this.C[i]=Ft(s,this.J),r.filter&&(typeof this.C[i]=="string"&&(this.C[i]=new String(this.C[i])),this.C[i].I=r.filter))}return n}function Ft(t,e){let n=t.split(":"),u=0;for(let i=0;i<n.length;i++)t=n[i],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(e[u]=!0),t&&(n[u++]=t);return u<n.length&&(n.length=u),1<u?n:n[0]}m.append=function(t,e){return this.add(t,e,!0)};m.update=function(t,e){return this.remove(t).add(t,e)};m.remove=function(t){ot(t)&&(t=lt(t,this.key));for(var e of this.index.values())e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let u of n){e=u[0];let i=u[1],r=i.indexOf(t);-1<r&&(1<i.length?i.splice(r,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};m.clear=function(){let t=[];for(let e of this.index.values()){let n=e.clear();n.then&&t.push(n)}if(this.tag)for(let e of this.tag.values())e.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};m.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};m.cleanup=function(){for(let t of this.index.values())t.cleanup();return this};m.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(e){return e[0]&&e[0].doc||null}):this.store.get(t)||null};m.set=function(t,e){return typeof t=="object"&&(e=t,t=lt(e,this.key)),this.store.set(t,e),this};m.searchCache=he;m.export=function(t,e,n=0,u=0){if(n<this.field.length){let s=this.field[n];if((e=this.index.get(s).export(t,s,n,u=1))&&e.then){let l=this;return e.then(function(){return l.export(t,s,n+1)})}return this.export(t,s,n+1)}let i,r;switch(u){case 0:i="reg",r=Yt(this.reg),e=null;break;case 1:i="tag",r=this.tag&&Qt(this.tag,this.reg.size),e=null;break;case 2:i="doc",r=this.store&&Tt(this.store),e=null;break;default:return}return pt.call(this,t,e,i,r,n,u)};m.import=function(t,e){var n=t.split(".");n[n.length-1]==="json"&&n.pop();let u=2<n.length?n[0]:"";if(n=2<n.length?n[2]:n[1],this.worker&&u)return this.index.get(u).import(t);if(e){if(typeof e=="string"&&(e=JSON.parse(e)),u)return this.index.get(u).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=te(e,this.reg);for(let i=0,r;i<this.field.length;i++)r=this.index.get(this.field[i]),r.fastupdate=!1,r.reg=this.reg;if(this.worker){e=[];for(let i of this.index.values())e.push(i.import(t));return Promise.all(e)}break;case"tag":this.tag=Xt(e,this.tag);break;case"doc":this.store=jt(e,this.store)}}};Mt(Q.prototype);function he(t,e,n){let u=(typeof t=="object"?""+t.query:t).toLowerCase();this.cache||(this.cache=new X);let i=this.cache.get(u);if(!i){if(i=this.search(t,e,n),i.then){let r=this;i.then(function(s){return r.cache.set(u,s),s})}this.cache.set(u,i)}return i}function X(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}X.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};X.prototype.get=function(t){let e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e};X.prototype.remove=function(t){for(let e of this.cache){let n=e[0];e[1].includes(t)&&this.cache.delete(n)}};X.prototype.clear=function(){this.cache.clear(),this.h=""};var $t={normalize:!1,numeric:!1,dedupe:!1},at={},wt=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Wt=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Kt=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Jt={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},ce={Exact:$t,Default:at,Normalize:at,LatinBalance:{mapper:wt},LatinAdvanced:{mapper:wt,matcher:Wt,replacer:Kt},LatinExtra:{mapper:wt,replacer:Kt.concat([/(?!^)[aeo]/g,""]),matcher:Wt},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let u=e.charAt(0),i=Jt[u];for(let r=1,s;r<e.length&&(s=e.charAt(r),s==="h"||s==="w"||!(s=Jt[s])||s===i||(u+=s,i=s,u.length!==4));r++);t[n]=u}}},CJK:{split:""},LatinExact:$t,LatinDefault:at,LatinSimple:at};I.prototype.remove=function(t,e){let n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let u=0,i;u<n.length;u++)if(i=n[u])if(2>i.length)i.pop();else{let r=i.indexOf(t);r===n.length-1?i.pop():i.splice(r,1)}}else ht(this.map,t),this.depth&&ht(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.T&&fe(this)),this.cache&&this.cache.remove(t),this};function ht(t,e){let n=0;var u=typeof e>"u";if(t.constructor===Array){for(let i=0,r,s;i<t.length;i++)if((r=t[i])&&r.length)if(u)n++;else if(s=r.indexOf(e),0<=s){1<r.length?(r.splice(s,1),n++):delete t[i];break}else n++}else for(let i of t.entries()){u=i[0];let r=ht(i[1],e);r?n+=r:t.delete(u)}return n}var Je={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};I.prototype.add=function(t,e,n,u){if(e&&(t||t===0)){if(!u&&!n&&this.reg.has(t))return this.update(t,e);u=this.depth,e=this.encoder.encode(e,!u);let h=e.length;if(h){let c=S(),f=S(),a=this.resolution;for(let g=0;g<h;g++){let D=e[this.rtl?h-1-g:g];var i=D.length;if(i&&(u||!f[D])){var r=this.score?this.score(e,D,g,null,0):Dt(a,h,g),s="";switch(this.tokenize){case"full":if(2<i){for(let p=0,F;p<i;p++)for(r=i;r>p;r--){s=D.substring(p,r),F=this.rtl?i-1-p:p;var l=this.score?this.score(e,D,g,s,F):Dt(a,h,g,i,F);st(this,f,s,l,t,n)}break}case"bidirectional":case"reverse":if(1<i){for(l=i-1;0<l;l--){s=D[this.rtl?i-1-l:l]+s;var o=this.score?this.score(e,D,g,s,l):Dt(a,h,g,i,l);st(this,f,s,o,t,n)}s=""}case"forward":if(1<i){for(l=0;l<i;l++)s+=D[this.rtl?i-1-l:l],st(this,f,s,r,t,n);break}default:if(st(this,f,D,r,t,n),u&&1<h&&g<h-1){for(i=S(),s=this.U,r=D,l=Math.min(u+1,this.rtl?g+1:h-g),i[r]=1,o=1;o<l;o++)if((D=e[this.rtl?h-1-g-o:g+o])&&!i[D]){i[D]=1;let p=this.score?this.score(e,r,g,D,o-1):Dt(s+(h/2>s?0:1),h,g,l-1,o-1),F=this.bidirectional&&D>r;st(this,c,F?r:D,p,t,n,F?D:r)}}}}}this.fastupdate||this.reg.add(t)}else e=""}return this.db&&(e||this.commit_task.push({del:t}),this.T&&fe(this)),this};function st(t,e,n,u,i,r,s){let l=s?t.ctx:t.map,o;if((!e[n]||s&&!(o=e[n])[s])&&(s?(e=o||(e[n]=S()),e[s]=1,(o=l.get(s))?l=o:l.set(s,l=new Map)):e[n]=1,(o=l.get(n))?l=o:l.set(n,l=o=[]),l=l[u]||(l[u]=[]),!r||!l.includes(i))){if(l.length===2**31-1){if(e=new q(l),t.fastupdate)for(let h of t.reg.values())h.includes(l)&&(h[h.indexOf(l)]=e);o[u]=l=e}l.push(i),t.fastupdate&&((u=t.reg.get(i))?u.push(l):t.reg.set(i,[l]))}}function Dt(t,e,n,u,i){return n&&1<t?e+(u||0)<=t?n+(i||0):(t-1)/(e+(u||0))*(n+(i||0))+1|0:0}I.prototype.search=function(t,e,n){n||(e||typeof t!="object"?typeof e=="object"&&(n=e,e=0):(n=t,t=""));let u=[],i,r,s,l=0,o,h,c,f,a;n?(t=n.query||t,e=n.limit||e,l=n.offset||0,r=n.context,s=n.suggest,a=(o=n.resolve!==!1)&&n.enrich,c=n.boost,f=n.resolution,h=this.db&&n.tag):o=this.resolve,r=this.depth&&r!==!1;let g=this.encoder.encode(t,!r);if(i=g.length,e=e||(o?100:0),i===1)return Gt.call(this,g[0],"",e,l,o,a,h);if(i===2&&r&&!s)return Gt.call(this,g[1],g[0],e,l,o,a,h);let D=S(),p=0,F;if(r&&(F=g[0],p=1),f||f===0||(f=F?this.U:this.resolution),this.db){if(this.db.search&&(t=this.db.search(this,g,e,l,s,o,a,h),t!==!1))return t;let E=this;return async function(){for(let C,T;p<i;p++){if((T=g[p])&&!D[T]){if(D[T]=1,C=await Lt(E,T,F,0,0,!1,!1),C=Zt(C,u,s,f)){u=C;break}F&&(s&&C&&u.length||(F=T))}s&&F&&p===i-1&&!u.length&&(f=E.resolution,F="",p=-1,D=S())}return Vt(u,f,e,l,s,c,o)}()}for(let E,C;p<i;p++){if((C=g[p])&&!D[C]){if(D[C]=1,E=Lt(this,C,F,0,0,!1,!1),E=Zt(E,u,s,f)){u=E;break}F&&(s&&E&&u.length||(F=C))}s&&F&&p===i-1&&!u.length&&(f=this.resolution,F="",p=-1,D=S())}return Vt(u,f,e,l,s,c,o)};function Vt(t,e,n,u,i,r,s){let l=t.length,o=t;if(1<l)o=ie(t,e,n,u,i,r,s);else if(l===1)return s?Rt.call(null,t[0],n,u):new w(t[0]);return s?o:new w(o)}function Gt(t,e,n,u,i,r,s){return t=Lt(this,t,e,n,u,i,r,s),this.db?t.then(function(l){return i?l||[]:new w(l)}):t&&t.length?i?Rt.call(this,t,n,u):new w(t):i?[]:new w}function Zt(t,e,n,u){let i=[];if(t&&t.length){if(t.length<=u){e.push(t);return}for(let r=0,s;r<u;r++)(s=t[r])&&(i[r]=s);if(i.length){e.push(i);return}}if(!n)return i}function Lt(t,e,n,u,i,r,s,l){let o;return n&&(o=t.bidirectional&&e>n)&&(o=n,n=e,e=o),t.db?t.db.get(e,n,u,i,r,s,l):(t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e),t)}function I(t,e){if(!this||this.constructor!==I)return new I(t);if(t){var n=z(t)?t:t.preset;n&&(t=Object.assign({},Je[n],t))}else t={};n=t.context;let u=n===!0?{depth:1}:n||{},i=z(t.encoder)?ce[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:typeof i=="object"?new et(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&n!=="default"&&n!=="exact"&&n||"strict",this.depth=n==="strict"&&u.depth||0,this.bidirectional=u.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new _(n):new Map,this.ctx=n?new _(n):new Map,this.reg=e||(this.fastupdate?n?new _(n):new Map:n?new H(n):new Set),this.U=u.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new X(n),this.resolve=t.resolve!==!1,(n=t.db)&&(this.db=this.mount(n)),this.T=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}m=I.prototype;m.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};m.commit=function(t,e){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this,t,e)};m.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function fe(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t,void 0,void 0)},1))}m.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db&&(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[{clear:!0}]),this};m.append=function(t,e){return this.add(t,e,!0)};m.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};m.update=function(t,e){let n=this,u=this.remove(t);return u&&u.then?u.then(()=>n.add(t,e)):this.add(t,e)};m.cleanup=function(){return this.fastupdate?(ht(this.map),this.depth&&ht(this.ctx),this):this};m.searchCache=he;m.export=function(t,e,n=0,u=0){let i,r;switch(u){case 0:i="reg",r=Yt(this.reg);break;case 1:i="cfg",r=null;break;case 2:i="map",r=Tt(this.map,this.reg.size);break;case 3:i="ctx",r=Qt(this.ctx,this.reg.size);break;default:return}return pt.call(this,t,e,i,r,n,u)};m.import=function(t,e){if(e)switch(typeof e=="string"&&(e=JSON.parse(e)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=1<t.length?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=te(e,this.reg);break;case"map":this.map=jt(e,this.map);break;case"ctx":this.ctx=Xt(e,this.ctx)}};m.serialize=function(t=!0){let e="",n="",u="";if(this.reg.size){let r;for(var i of this.reg.keys())r||(r=typeof i),e+=(e?",":"")+(r==="string"?'"'+i+'"':i);e="index.reg=new Set(["+e+"]);",n=_t(this.map,r),n="index.map=new Map(["+n+"]);";for(let s of this.ctx.entries()){i=s[0];let l=_t(s[1],r);l="new Map(["+l+"])",l='["'+i+'",'+l+"]",u+=(u?",":"")+l}u="index.ctx=new Map(["+u+"]);"}return t?"function inject(index){"+e+n+u+"}":e+n+u};Mt(I.prototype);var ae=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),dt=["map","ctx","tag","reg","cfg"],G=S();function mt(t,e={}){if(!this||this.constructor!==mt)return new mt(t,e);typeof t=="object"&&(e=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=e.field?e.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=e.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}m=mt.prototype;m.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};m.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),G[t.id]||(G[t.id]=[]),G[t.id].push(t.field);let e=ae.open(t.id,1);return e.onupgradeneeded=function(){let n=t.db=this.result;for(let u=0,i;u<dt.length;u++){i=dt[u];for(let r=0,s;r<G[t.id].length;r++)s=G[t.id][r],n.objectStoreNames.contains(i+(i!=="reg"&&s?":"+s:""))||n.createObjectStore(i+(i!=="reg"&&s?":"+s:""))}},t.db=W(e,function(n){t.db=n,t.db.onversionchange=function(){t.close()}})};m.close=function(){this.db&&this.db.close(),this.db=null};m.destroy=function(){let t=ae.deleteDatabase(this.id);return W(t)};m.clear=function(){let t=[];for(let n=0,u;n<dt.length;n++){u=dt[n];for(let i=0,r;i<G[this.id].length;i++)r=G[this.id][i],t.push(u+(u!=="reg"&&r?":"+r:""))}let e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return W(e)};m.get=function(t,e,n=0,u=0,i=!0,r=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);let s=this;return W(t).then(function(l){let o=[];if(!l||!l.length)return o;if(i){if(!n&&!u&&l.length===1)return l[0];for(let h=0,c;h<l.length;h++)if((c=l[h])&&c.length){if(u>=c.length){u-=c.length;continue}let f=n?u+Math.min(c.length-u,n):c.length;for(let a=u;a<f;a++)o.push(c[a]);if(u=0,o.length===n)break}return r?s.enrich(o):o}return l})};m.tag=function(t,e=0,n=0,u=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);let i=this;return W(t).then(function(r){return!r||!r.length||n>=r.length?[]:!e&&!n?r:(r=r.slice(n,n+e),u?i.enrich(r):r)})};m.enrich=function(t){typeof t!="object"&&(t=[t]);let e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let u=0;u<t.length;u++)n[u]=W(e.get(t[u]));return Promise.all(n).then(function(u){for(let i=0;i<u.length;i++)u[i]={id:t[i],doc:u[i]?JSON.parse(u[i]):null};return u})};m.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),W(t).then(function(e){return!!e})};m.search=null;m.info=function(){};m.transaction=function(t,e,n){t+=t!=="reg"&&this.field?":"+this.field:"";let u=this.h[t+":"+e];if(u)return n.call(this,u);let i=this.db.transaction(t,e);this.h[t+":"+e]=u=i.objectStore(t);let r=n.call(this,u);return this.h[t+":"+e]=null,W(i).finally(function(){return i=u=null,r})};m.commit=async function(t,e,n){if(e)await this.clear(),t.commit_task=[];else{let u=t.commit_task;t.commit_task=[];for(let i=0,r;i<u.length;i++)if(r=u[i],r.clear){await this.clear(),e=!0;break}else u[i]=r.del;e||(n||(u=u.concat(je(t.reg))),u.length&&await this.remove(u))}t.reg.size&&(await this.transaction("map","readwrite",function(u){for(let i of t.map){let r=i[0],s=i[1];s.length&&(e?u.put(s,r):u.get(r).onsuccess=function(){let l=this.result;var o;if(l&&l.length){let h=Math.max(l.length,s.length);for(let c=0,f,a;c<h;c++)if((a=s[c])&&a.length){if((f=l[c])&&f.length)for(o=0;o<a.length;o++)f.push(a[o]);else l[c]=a;o=1}}else l=s,o=1;o&&u.put(l,r)})}}),await this.transaction("ctx","readwrite",function(u){for(let i of t.ctx){let r=i[0],s=i[1];for(let l of s){let o=l[0],h=l[1];h.length&&(e?u.put(h,r+":"+o):u.get(r+":"+o).onsuccess=function(){let c=this.result;var f;if(c&&c.length){let a=Math.max(c.length,h.length);for(let g=0,D,p;g<a;g++)if((p=h[g])&&p.length){if((D=c[g])&&D.length)for(f=0;f<p.length;f++)D.push(p[f]);else c[g]=p;f=1}}else c=h,f=1;f&&u.put(c,r+":"+o)})}}}),t.store?await this.transaction("reg","readwrite",function(u){for(let i of t.store){let r=i[0],s=i[1];u.put(typeof s=="object"?JSON.stringify(s):1,r)}}):t.bypass||await this.transaction("reg","readwrite",function(u){for(let i of t.reg.keys())u.put(1,i)}),t.tag&&await this.transaction("tag","readwrite",function(u){for(let i of t.tag){let r=i[0],s=i[1];s.length&&(u.get(r).onsuccess=function(){let l=this.result;l=l&&l.length?l.concat(s):s,u.put(l,r)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function xt(t,e,n){let u=t.value,i,r=0;for(let s=0,l;s<u.length;s++){if(l=n?u:u[s]){for(let o=0,h,c;o<e.length;o++)if(c=e[o],h=l.indexOf(c),0<=h)if(i=1,1<l.length)l.splice(h,1);else{u[s]=[];break}r+=l.length}if(n)break}r?i&&t.update(u):t.delete(),t.continue()}m.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){let n=this.result;n&&xt(n,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){let n=this.result;n&&xt(n,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){let n=this.result;n&&xt(n,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};function W(t,e){return new Promise((n,u)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=u,t=null})}var De={Index:I,Charset:ce,Encoder:et,Document:Q,Worker:nt,Resolver:w,IndexedDB:mt,Language:{}};function ge(t,e){if(!t)return;function n(i){i.target===this&&(i.preventDefault(),i.stopPropagation(),e())}function u(i){i.key.startsWith("Esc")&&(i.preventDefault(),e())}t?.addEventListener("click",n),window.addCleanup(()=>t?.removeEventListener("click",n)),document.addEventListener("keydown",u),window.addCleanup(()=>document.removeEventListener("keydown",u))}function ct(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var Fn=Object.hasOwnProperty;var de=Ht(Fe(),1),Ze=(0,de.default)();function qe(t){let e=Ae(tn(t,"index"),!0);return e.length===0?"/":e}var me=(t,e,n)=>{let u=new URL(t.getAttribute(e),n);t.setAttribute(e,u.pathname+u.hash)};function Ee(t,e){t.querySelectorAll('[href=""], [href^="./"], [href^="../"]').forEach(n=>me(n,"href",e)),t.querySelectorAll('[src=""], [src^="./"], [src^="../"]').forEach(n=>me(n,"src",e))}function Qe(t){let e=t.split("/").filter(n=>n!=="").slice(0,-1).map(n=>"..").join("/");return e.length===0&&(e="."),e}function Ce(t,e){return Xe(Qe(t),qe(e))}function Xe(...t){if(t.length===0)return"";let e=t.filter(n=>n!==""&&n!=="/").map(n=>Ae(n)).join("/");return t[0].startsWith("/")&&(e="/"+e),t[t.length-1].endsWith("/")&&(e=e+"/"),e}function Ye(t,e){return t===e||t.endsWith("/"+e)}function tn(t,e){return Ye(t,e)&&(t=t.slice(0,-e.length)),t}function Ae(t,e){return t.startsWith("/")&&(t=t.substring(1)),!e&&t.endsWith("/")&&(t=t.slice(0,-1)),t}var K="basic",R="",en=t=>t.toLowerCase().split(/([^a-z]|[^\x00-\x7F])/),ft=new De.Document({charset:"latin:extra",encode:en,document:{id:"id",tag:"tags",index:[{field:"title",tokenize:"forward"},{field:"content",tokenize:"forward"},{field:"tags",tokenize:"forward"}]}}),nn=new DOMParser,bt=new Map,Ct=30,At=8,un=5,we=t=>{let e=t.split(/\s+/).filter(u=>u.trim()!==""),n=e.length;if(n>1)for(let u=1;u<n;u++)e.push(e.slice(0,u+1).join(" "));return e.sort((u,i)=>i.length-u.length)};function ye(t,e,n){let u=we(t),i=e.split(/\s+/).filter(o=>o!==""),r=0,s=i.length-1;if(n){let o=a=>u.some(g=>a.toLowerCase().startsWith(g.toLowerCase())),h=i.map(o),c=0,f=0;for(let a=0;a<Math.max(i.length-Ct,0);a++){let D=h.slice(a,a+Ct).reduce((p,F)=>p+(F?1:0),0);D>=c&&(c=D,f=a)}r=Math.max(f-Ct,0),s=Math.min(r+2*Ct,i.length-1),i=i.slice(r,s)}let l=i.map(o=>{for(let h of u)if(o.toLowerCase().includes(h.toLowerCase())){let c=new RegExp(h.toLowerCase(),"gi");return o.replace(c,'<span class="highlight">$&</span>')}return o}).join(" ");return`${r===0?"":"..."}${l}${s===i.length-1?"":"..."}`}function rn(t,e){let n=new DOMParser,u=we(t),i=n.parseFromString(e.innerHTML,"text/html"),r=l=>{let o=document.createElement("span");return o.className="highlight",o.textContent=l,o},s=(l,o)=>{if(l.nodeType===Node.TEXT_NODE){let h=l.nodeValue??"",c=new RegExp(o.toLowerCase(),"gi"),f=h.match(c);if(!f||f.length===0)return;let a=document.createElement("span"),g=0;for(let D of f){let p=h.indexOf(D,g);a.appendChild(document.createTextNode(h.slice(g,p))),a.appendChild(r(D)),g=p+D.length}a.appendChild(document.createTextNode(h.slice(g))),l.parentNode?.replaceChild(a,l)}else if(l.nodeType===Node.ELEMENT_NODE){if(l.classList.contains("highlight"))return;Array.from(l.childNodes).forEach(h=>s(h,o))}};for(let l of u)s(i.body,l);return i.body}async function sn(t,e,n){let u=t.querySelector(".search-container");if(!u)return;let i=u.closest(".sidebar"),r=t.querySelector(".search-button");if(!r)return;let s=t.querySelector(".search-bar");if(!s)return;let l=t.querySelector(".search-layout");if(!l)return;let o=Object.keys(n),h=d=>{l.appendChild(d)},c=l.dataset.preview==="true",f,a,g=document.createElement("div");g.className="results-container",h(g),c&&(f=document.createElement("div"),f.className="preview-container",h(f));function D(){u.classList.remove("active"),s.value="",i&&(i.style.zIndex=""),ct(g),f&&ct(f),l.classList.remove("display-results"),K="basic",r.focus()}function p(d){K=d,i&&(i.style.zIndex="1"),u.classList.add("active"),s.focus()}let F=null;async function E(d){if(d.key==="k"&&(d.ctrlKey||d.metaKey)&&!d.shiftKey){d.preventDefault(),u.classList.contains("active")?D():p("basic");return}else if(d.shiftKey&&(d.ctrlKey||d.metaKey)&&d.key.toLowerCase()==="k"){d.preventDefault(),u.classList.contains("active")?D():p("tags"),s.value="#";return}if(F&&F.classList.remove("focus"),!!u.classList.contains("active")){if(d.key==="Enter")if(g.contains(document.activeElement)){let A=document.activeElement;if(A.classList.contains("no-match"))return;await L(A),A.click()}else{let A=document.getElementsByClassName("result-card")[0];if(!A||A.classList.contains("no-match"))return;await L(A),A.click()}else if(d.key==="ArrowUp"||d.shiftKey&&d.key==="Tab"){if(d.preventDefault(),g.contains(document.activeElement)){let A=F||document.activeElement,B=A?.previousElementSibling;A?.classList.remove("focus"),B?.focus(),B&&(F=B),await L(B)}}else if((d.key==="ArrowDown"||d.key==="Tab")&&(d.preventDefault(),document.activeElement===s||F!==null)){let A=F||document.getElementsByClassName("result-card")[0],B=A?.nextElementSibling;A?.classList.remove("focus"),B?.focus(),B&&(F=B),await L(B)}}}let C=(d,A)=>{let B=o[A];return{id:A,slug:B,title:K==="tags"?n[B].title:ye(d,n[B].title??""),content:ye(d,n[B].content??"",!0),tags:T(d.substring(1),n[B].tags)}};function T(d,A){return!A||K!=="tags"?[]:A.map(B=>B.toLowerCase().includes(d.toLowerCase())?`<li><p class="match-tag">#${B}</p></li>`:`<li><p>#${B}</p></li>`).slice(0,un)}function x(d){return new URL(Ce(e,d),location.toString())}let y=({slug:d,title:A,content:B,tags:N})=>{let P=N.length>0?`<ul class="tags">${N.join("")}</ul>`:"",k=document.createElement("a");k.classList.add("result-card"),k.id=d,k.href=x(d).toString(),k.innerHTML=`
      <h3 class="card-title">${A}</h3>
      ${P}
      <p class="card-description">${B}</p>
    `,k.addEventListener("click",j=>{j.altKey||j.ctrlKey||j.metaKey||j.shiftKey||D()});let J=j=>{j.altKey||j.ctrlKey||j.metaKey||j.shiftKey||D()};async function V(j){if(!j.target)return;let xe=j.target;await L(xe)}return k.addEventListener("mouseenter",V),window.addCleanup(()=>k.removeEventListener("mouseenter",V)),k.addEventListener("click",J),window.addCleanup(()=>k.removeEventListener("click",J)),k};async function v(d){if(ct(g),d.length===0?g.innerHTML=`<a class="result-card no-match">
          <h3>No results.</h3>
          <p>Try another search term?</p>
      </a>`:g.append(...d.map(y)),d.length===0&&f)ct(f);else{let A=g.firstElementChild;A.classList.add("focus"),F=A,await L(A)}}async function b(d){if(bt.has(d))return bt.get(d);let A=x(d).toString(),B=await fetch(A).then(N=>N.text()).then(N=>{if(N===void 0)throw new Error(`Could not fetch ${A}`);let P=nn.parseFromString(N??"","text/html");return Ee(P,A),[...P.getElementsByClassName("popover-hint")]});return bt.set(d,B),B}async function L(d){if(!l||!c||!d||!f)return;let A=d.id,B=await b(A).then(P=>P.flatMap(k=>[...rn(R,k).children]));a=document.createElement("div"),a.classList.add("preview-inner"),a.append(...B),f.replaceChildren(a),[...f.getElementsByClassName("highlight")].sort((P,k)=>k.innerHTML.length-P.innerHTML.length)[0]?.scrollIntoView({block:"start"})}async function O(d){if(!l||!ft)return;R=d.target.value,l.classList.toggle("display-results",R!==""),K=R.startsWith("#")?"tags":"basic";let A;if(K==="tags"){R=R.substring(1).trim();let k=R.indexOf(" ");if(k!=-1){let J=R.substring(0,k),V=R.substring(k+1).trim();A=await ft.searchAsync({query:V,limit:Math.max(At,1e4),index:["title","content"],tag:J});for(let j of A)j.result=j.result.slice(0,At);K="basic",R=V}else A=await ft.searchAsync({query:R,limit:At,index:["tags"]})}else K==="basic"&&(A=await ft.searchAsync({query:R,limit:At,index:["title","content"]}));let B=k=>{let J=A.filter(V=>V.field===k);return J.length===0?[]:[...J[0].result]},P=[...new Set([...B("title"),...B("content"),...B("tags")])].map(k=>C(R,k));await v(P)}document.addEventListener("keydown",E),window.addCleanup(()=>document.removeEventListener("keydown",E)),r.addEventListener("click",()=>p("basic")),window.addCleanup(()=>r.removeEventListener("click",()=>p("basic"))),s.addEventListener("input",O),window.addCleanup(()=>s.removeEventListener("input",O)),ge(u,D),await on(n)}var Be=!1;async function on(t){if(Be)return;let e=0,n=[];for(let[u,i]of Object.entries(t))n.push(ft.addAsync(e++,{id:e,slug:u,title:i.title,content:i.content,tags:i.tags}));await Promise.all(n),Be=!0}document.addEventListener("nav",async t=>{let e=t.detail.url,n=await fetchData,u=document.getElementsByClassName("search");for(let i of u)await sn(i,e,n)});})();
